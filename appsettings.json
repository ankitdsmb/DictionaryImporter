{
  "ConnectionStrings": {
    "DictionaryImporter": "Server=DESKTOP-7GF8EBR\\SQLEXPRESS;Database=DictionaryImporter_FINAL;Integrated Security=True;Encrypt=True;TrustServerCertificate=True;"
  },

  "Sources": {
    "GutenbergWebster": { "FilePath": "Resources/DataSource/Dictionaries/GutenbergWebsterSource.txt" },
    "StructuredJson": { "FilePath": "Resources/DataSource/Dictionaries/dictionary_1.json" },
    "EnglishChinese": { "FilePath": "Resources/DataSource/Dictionaries/TheEnglishChineseDictionary.txt" },
    "Collins": { "FilePath": "Resources/DataSource/Dictionaries/Collins.txt" },
    "Oxford": { "FilePath": "Resources/DataSource/Dictionaries/Oxford.txt" },
    "Century21": { "FilePath": "Resources/DataSource/Dictionaries/century21.txt" },
    "Kaikki": {
      "FilePath": "G:\\dESKTOP 17-01-2026\\Download 17-01-2026\\kaikki.org-dictionary-English-words.jsonl",
      "Language": "en"
    }
  },

  "IPA": {
    "Sources": [
      {
        "Locale": "en-US",
        "FilePath": "Resources/DataSource/IPA/en_US.txt"
      },
      {
        "Locale": "en-UK",
        "FilePath": "Resources/DataSource/IPA/en_UK.txt"
      }
    ]
  },

  "Pipeline": {
    "Mode": "Full"
  },

  "OneTimeTasks": [
    "migrate-editorial-ipa",
    "promote-ipa-from-notes"
  ],

  "Grammar": {
    "Enabled": true,
    "MinDefinitionLength": 20,
    "DefaultLanguage": "en-US",
    "LanguageToolUrl": "http://localhost:2026",
    "HunspellDictionaryPath": "Gateway/Grammar/Configuration/Dictionaries",

    "PatternRulesPath": "Gateway/Grammar/Configuration/grammar-rules.json",
    "DictionaryRewriteRulesPath": "Gateway/Grammar/Configuration/dictionary-rewrite-rules.json",

    "NTextCatProfilePath": "Gateway/Grammar/Configuration/Core14.profile.xml",
    "GrammarNetApiKey": "",
    "TimeoutSeconds": 30,
    "MaxRetryAttempts": 3,
    "RateLimitPerMinute": 60,
    "CacheMinutes": 10,
    "CommonTextCacheHours": 1,

    "SafeAutoCorrectRules": [
      "MORFOLOGIK_RULE_EN_US",
      "MORFOLOGIK_RULE_EN_GB",
      "MORFOLOGIK_RULE_EN_AU",
      "MORFOLOGIK_RULE_EN_CA",
      "UPPERCASE_SENTENCE_START",
      "EN_A_VS_AN",
      "EN_CONTRACTION_SPELLING",
      "DOUBLE_PUNCTUATION",
      "EXTRA_SPACE",
      "MISSING_COMMA",
      "SENTENCE_WHITESPACE"
    ],

    "SourceEnabled": {
      "GUT_WEBSTER": true,
      "ENG_COLLINS": true,
      "ENG_OXFORD": true,
      "ENG_CHN": true,
      "STRUCT_JSON": true,
      "CENTURY21": true
    },

    "SourceLanguages": {
      "GUT_WEBSTER": "en-US",
      "ENG_COLLINS": "en-GB",
      "ENG_OXFORD": "en-GB",
      "ENG_CHN": "en-US",
      "STRUCT_JSON": "en-US",
      "CENTURY21": "en-US"
    }
  },

  "RuleBasedRewrite": {
    "Enabled": true,
    "Take": 200,
    "LanguageCode": "en-US",
    "RewriteDefinitions": {
      "Enabled": true,
      "Take": 500,
      "MaxExamplesPerParsedDefinition": 10,
      "Provider": "RuleBased",
      "Model": "Regex+RewriteMap+Humanizer",
      "ForceRewrite": false
    },
    "RewriteExamples": {
      "Enabled": true,
      "Take": 1000,
      "ConfidenceScore": 100,
      "Model": "Regex+RewriteMap+Humanizer",
      "ForceRewrite": false
    }
  },

  "RuleBasedRewriteJob": {
    "Enabled": false,
    "Take": 500,
    "DefaultLanguageCode": "en-US",
    "SourceCodes": [
      "GUT_WEBSTER",
      "ENG_COLLINS",
      "ENG_OXFORD"
    ]
  },

  "RewriteMap": {
    "EnableCaching": true,
    "CacheTtlSeconds": 600,
    "MaxAppliedCorrections": 200,
    "RegexTimeoutMs": 60
  },

  "LuceneSuggestions": {
    "Enabled": true,
    "IndexPath": "G:\\LuceneSuggestions\\indexes\\lucene",
    "MaxSuggestions": 3,
    "MinScore": 1.2,
    "Take": 500,
    "ForceRebuild": false,
    "RebuildMode": "Safe",
    "WriteCandidatesToSql": false,
    "CandidateMinConfidence": 0.75
  },

  "AiGateway": {
    "EnablePipelineSteps": {
      "AiEnhancement": false
    },

    "AiEnhancement": {
      "Take": 50,
      "Provider": "Ollama",
      "Model": "llama3.1",
      "MaxTokens": 250,
      "Temperature": 0.2,
      "ParallelCalls": 1,
      "Mode": "SingleBest"
    },

    "Providers": [
      {
        "Name": "OpenAI",
        "BaseUrl": "https://api.openai.com/v1/chat/completions",
        "ApiKey": "YOUR_KEY",
        "AuthHeader": "Authorization: Bearer {{ApiKey}}",
        "DefaultModel": "gpt-4o-mini",
        "RequestTemplate": {
          "model": "{{Model}}",
          "messages": [
            {
              "role": "system",
              "content": "{{SystemPrompt}}"
            },
            {
              "role": "user",
              "content": "{{Prompt}}"
            }
          ],
          "temperature": "{{Temperature}}",
          "max_tokens": "{{MaxTokens}}"
        },
        "ResponsePath": "$.choices[0].message.content"
      },
      {
        "Name": "Ollama",
        "BaseUrl": "http://localhost:11434/api/generate",
        "ApiKey": "",
        "AuthHeader": "",
        "DefaultModel": "deepseek-v3.1:671b-cloud",
        "RequestTemplate": {
          "model": "{{Model}}",
          "prompt": "{{Prompt}}",
          "stream": false
        },
        "ResponsePath": "$.response"
      }
    ]
  },

  "AllowedHosts": "*",

  "ImportPipeline": {
    "DefaultSteps": [
      "Parsing"
    ],

    "Sources": {
      "WORDNET": {
        "Steps": [
          "Canonicalization",
          "Parsing",
          "Linguistics",
          "GrammarCorrection",
          "RuleBasedRewrite",
          "OrthographicSyllables",
          "GraphBuild",
          "GraphValidation",
          "ConceptBuild",
          "ConceptMerge",
          "Ipa",
          "IpaSyllables",
          "Verification"
        ]
      }
    }
  },

  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [
      "FromLogContext",
      "WithMachineName",
      "WithThreadId"
    ],
    "Properties": {
      "Application": "DictionaryImporter"
    }
  },

  "OcrNormalization": {
    "Enabled": true,
    "EnableHunspellSplit": true,
    "EnableReplacements": true,
    "LogChanges": false,
    "MinTokenLengthForSplit": 6,
    "Replacements": {
      "anwhich": "an which",
      "inthe": "in the",
      "ofthe": "of the",
      "tothe": "to the",
      "andthe": "and the"
    }
  },

  "TextFormatting": {
    "Style": "Modern",
    "Note": "Classic, Modern",
    "MaxDefinitionLineLength": 120,
    "UseBulletsForMultiLineDefinitions": false,
    "KeepSemicolons": false,
    "TitleCaseMeaningTitle": true
  },

  "BatchProcessing": {
    "BatchSize": 2000,
    "MaxParallelism": 1,
    "MaxDatabaseConnections": 20,
    "NonEnglishTextParallelism": 20,
    "CommandTimeoutSeconds": 600,
    "BatchCommandTimeoutSeconds": 600
  },
  "ParallelProcessing": {
    "DegreeOfParallelism": 1,
    "MaxConcurrentBatches": 1,
    "BatchSize": 2000,
    "MaxDatabaseConnections": 20,
    "EnableParallelProcessing": true,
    "RetryCount": 5,
    "RetryDelayMs": 2000
  },
  "Redis": {
    "Enabled": true,
    "ConnectionString": "localhost:6379,abortConnect=false",
    "KeyPrefix": "DictionaryImporter"
  },
  "FragmentStore": {
    "RootPath": "E:\\Project\\Data Importer\\DictionaryRawFragments",
    "MaxMemoryCacheSize": 100000,
    "CompressionThreshold": 1024,
    "DirectoryDepth": 2,
    "PrefixLength": 2,
    "CaseSensitive": false,
    "PreCreateTopDirectories": 100,
    "EnableMemoryMappedFiles": true,
    "MaxMemoryMappedFiles": 100,
    "CompressionLevel": "Fastest"
  }
}