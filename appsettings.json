{
  "ConnectionStrings": {
    "DictionaryImporter": "Server=DESKTOP-7GF8EBR\\SQLEXPRESS;Database=DictionaryImporter;Integrated Security=True;Encrypt=True;TrustServerCertificate=True;"
  },

  "Sources": {
    "GutenbergWebster": { "FilePath": "Resources/DataSource/Dictionaries/GutenbergWebsterSource.txt" },
    "StructuredJson": { "FilePath": "Resources/DataSource/Dictionaries/dictionary_1.json" },
    "EnglishChinese": { "FilePath": "Resources/DataSource/Dictionaries/TheEnglishChineseDictionary.txt" },
    "Collins": { "FilePath": "Resources/DataSource/Dictionaries/Collins.txt" },
    "Oxford": { "FilePath": "Resources/DataSource/Dictionaries/Oxford.txt" },
    "Century21": { "FilePath": "Resources/DataSource/Dictionaries/century21.txt" },
    "Kaikki": {
      "FilePath": "G:\\DictionaryImporter\\Resources\\DataSource\\Dictionaries\\kaikki.sample.5000.jsonl",
      "Language": "en"
    }
  },

  "IPA": {
    "Sources": [
      {
        "Locale": "en-US",
        "FilePath": "Resources/DataSource/IPA/en_US.txt"
      },
      {
        "Locale": "en-UK",
        "FilePath": "Resources/DataSource/IPA/en_UK.txt"
      }
    ]
  },

  "Pipeline": {
    "Mode": "Full"
  },

  "OneTimeTasks": [
    "migrate-editorial-ipa",
    "promote-ipa-from-notes"
  ],

  "Grammar": {
    "Enabled": false,
    "MinDefinitionLength": 20,
    "DefaultLanguage": "en-US",
    "LanguageToolUrl": "http://localhost:2026",
    "HunspellDictionaryPath": "Gateway/Grammar/Configuration/Dictionaries",
    "PatternRulesPath": "Gateway/Grammar/Configuration/grammar-rules.json",
    "NTextCatProfilePath": "Gateway/Grammar/Configuration/Core14.profile.xml",
    "GrammarNetApiKey": "",

    "SourceEnabled": {
      "GUT_WEBSTER": true,
      "ENG_COLLINS": true,
      "ENG_OXFORD": true,
      "ENG_CHN": true,
      "STRUCT_JSON": true,
      "CENTURY21": true
    },

    "SourceLanguages": {
      "GUT_WEBSTER": "en-US",
      "ENG_COLLINS": "en-GB",
      "ENG_OXFORD": "en-GB",
      "ENG_CHN": "en-US",
      "STRUCT_JSON": "en-US",
      "CENTURY21": "en-US"
    }
  },

  "AiGateway": {
    "EnablePipelineSteps": {
      "AiEnhancement": false
    },
    "AiEnhancement": {
      "Take": 50,
      "Provider": "Ollama",
      "Model": "llama3.1",
      "MaxTokens": 250,
      "Temperature": 0.2,
      "ParallelCalls": 1,
      "Mode": "SingleBest"
    },
    "Providers": [
      {
        "Name": "OpenAI",
        "BaseUrl": "https://api.openai.com/v1/chat/completions",
        "ApiKey": "YOUR_KEY",
        "AuthHeader": "Authorization: Bearer {{ApiKey}}",
        "DefaultModel": "gpt-4o-mini",
        "RequestTemplate": {
          "model": "{{Model}}",
          "messages": [
            {
              "role": "system",
              "content": "{{SystemPrompt}}"
            },
            {
              "role": "user",
              "content": "{{Prompt}}"
            }
          ],
          "temperature": "{{Temperature}}",
          "max_tokens": "{{MaxTokens}}"
        },
        "ResponsePath": "$.choices[0].message.content"
      },
      {
        "Name": "Ollama",
        "BaseUrl": "http://localhost:11434/api/generate",
        "ApiKey": "",
        "AuthHeader": "",
        "DefaultModel": "deepseek-v3.1:671b-cloud",
        "RequestTemplate": {
          "model": "{{Model}}",
          "prompt": "{{Prompt}}",
          "stream": false
        },
        "ResponsePath": "$.response"
      }
    ]
  },

  "AllowedHosts": "*",

  "ImportPipeline": {
    "DefaultSteps": [
      "Canonicalization",
      "Parsing",
      "Linguistics",
      "OrthographicSyllables",
      "GraphBuild",
      "GraphValidation",
      "ConceptBuild",
      "ConceptMerge",
      "IPA",
      "IpaSyllables",
      "Verification",

      "GrammarCorrection",
      "AiEnhancement"
    ],
    "Sources": {
      "WORDNET": {
        "Steps": [
          "Canonicalization",
          "Parsing",
          "GrammarCorrection",
          "AiEnhancement",
          "Verification"
        ]
      }
    }
  },

  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ],
    "Properties": {
      "Application": "DictionaryImporter"
    }
  },

  "OcrNormalization": {
    "Enabled": false,
    "EnableHunspellSplit": false,
    "EnableReplacements": true,
    "LogChanges": true,
    "MinTokenLengthForSplit": 6,
    "Replacements": {
      "anwhich": "an which",
      "inthe": "in the",
      "ofthe": "of the",
      "tothe": "to the",
      "andthe": "and the"
    }
  },

  "TextFormatting": {
    "Style": "Modern",
    "Note": "Classic, Modern",
    "MaxDefinitionLineLength": 120,
    "UseBulletsForMultiLineDefinitions": false,
    "KeepSemicolons": false,
    "TitleCaseMeaningTitle": true
  }
}